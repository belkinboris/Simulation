<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Psychology Life Simulator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom, #f4f4f9, #c4e0e5);
      color: #333;
    }
    .intro-screen, .main-screen { display: none; }
    .intro-screen.active, .main-screen.active { display: block; }
    .container { max-width: 800px; margin: auto; padding: 20px; }
    #chat { border: 1px solid #ddd; padding: 10px; height: 200px; overflow-y: auto; }
    button { padding: 10px; border: none; background: #007bff; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <div id="intro-screen" class="intro-screen active">
    <div class="container">
      <h1>Psychology Life Simulator</h1>
      <button onclick="startGame()">Start Game</button>
    </div>
  </div>
  <div id="main-screen" class="main-screen">
    <div class="container">
      <h1>Character Information</h1>
      <div id="personality"></div>
      <div id="age">Age: 0</div>
      <div id="chat">The character will ask you for advice.</div>
    </div>
  </div>
<script>
  const part1 = "sk-proj-BsCX9lMs7NmPmSuzxThp7BBC4fceQaKamOBXJwnoY3FIk0q3Q-";
  const part2 = "Ot6_pkMeYiTUcfgn1qmhAvDAT3BlbkFJ1LpniaUswXnQFLA4a0oIUKYxqj";
  const part3 = "1vpTw5S7ONlb9Q-x2Wfn-w4XTTOLvLhrrRLGjtZ29VTJxEUA";
  const API_KEY = part1 + part2 + part3;

  let character = { age: 0, personality: "INFJ" };

  function startGame() {
    document.getElementById("intro-screen").classList.remove("active");
    document.getElementById("main-screen").classList.add("active");
    askAIQuestion();
  }

  async function askAIQuestion() {
    const prompt = `Generate a psychological question for a character at age ${character.age} with personality ${character.personality}.`;

    try {
      const proxy = "https://cors-anywhere.herokuapp.com/";
      const openAIUrl = "https://api.openai.com/v1/completions";

      const response = await fetch(proxy + openAIUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${API_KEY}`,
        },
        body: JSON.stringify({
          model: "text-davinci-003",
          prompt: prompt,
          max_tokens: 100,
          temperature: 0.7,
        }),
      });

      if (!response.ok) {
        throw new Error(`API error: ${response.status} ${response.statusText}`);
      }

      const data = await response.json();
      document.getElementById("chat").innerText = data.choices[0].text.trim();
    } catch (error) {
      console.error("Error fetching AI response:", error);
      document.getElementById("chat").innerText = `Error generating question: ${error.message}`;
    }
  }
</script>
</body>
</html>